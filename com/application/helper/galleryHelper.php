<?php class galleryHelper {	function __construct($apps){		global $logger;		$this->logger = $logger;		$this->apps = $apps;		if(is_object($this->apps->user)) {				$uid = intval($this->apps->_request('uid'));				if($uid==0) $this->uid = intval($this->apps->user->id);				else $this->uid = $uid;		}		$this->dbshema = "beat";			$this->topclass = array(100,4,6);	}		function allGalleryList(){				$sql = "SELECT * FROM user_flavor";		$qData = $this->apps->fetch($sql,1);		if($qData) return $qData;		return false;		}		function galleryfinalist(){		$sql = "SELECT uf.*, sm.fbId, sm.name AS fb_name				FROM user_flavors uf				LEFT JOIN social_member sm				ON sm.id = uf.userid				WHERE uf.n_status=2				ORDER BY uf.id DESC LIMIT 10";		$qData = $this->apps->fetch($sql,1);		if(isset($this->uid)){			$sql = "SELECT usr_flavor_id FROM user_votes 					WHERE userid = {$this->uid}";			$rs = $this->apps->fetch($sql,1);			$fid = array();						if($rs){				foreach ($rs as $key => $value) {					$fid[]=$value['usr_flavor_id'];				}				foreach ($qData as $key => $value) {					if(in_array($value['id'], $fid)) $qData[$key]['voted'] = 1;				}			}		}				if($qData) return $qData;		return false;		}	}?>